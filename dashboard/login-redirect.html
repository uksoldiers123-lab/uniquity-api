<!doctype html>
<html lang="en">
<head><meta charset="utf-8" /><title>Dashboard Redirect</title></head>
<body>
  <p>Signing you in...</p>
  <script>
    (async () => {
      const q = new URLSearchParams(location.search);
      const token = q.get('token');
      if (!token) {
        window.location = '/login';
        return;
      }

      const r = await fetch('/dashboard/verify-token', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ token })
      });

      if (r.ok) {
        window.location.href = '/';
      } else {
        window.location.href = '/login';
      }
    })();
  </script>
</body>
</html>
